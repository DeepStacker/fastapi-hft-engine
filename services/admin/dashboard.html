<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stockify Admin Dashboard</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --dark: #1f2937;
            --light: #f9fafb;
            --gray: #6b7280;
            --bg: #f3f4f6;
            --card-bg: white;
            --text: #1f2937;
            --border: #e5e7eb;
        }

        [data-theme="dark"] {
            --dark: #f9fafb;
            --light: #1f2937;
            --bg: #111827;
            --card-bg: #1f2937;
            --text: #f9fafb;
            --border: #374151;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            transition: background 0.3s, color 0.3s;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: 100vh;
        }

        .sidebar {
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            color: white;
            padding: 1.5rem;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .nav-item {
            padding: 0.75rem 1rem;
            margin: 0.25rem 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        .main-content {
            padding: 2rem;
            overflow-y: auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-secondary {
            background: var(--card-bg);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .card-header {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .grid-4 {
            grid-template-columns: repeat(4, 1fr);
        }

        .stat-card {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0.5rem 0;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.875rem;
        }

        .stat-change {
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        .badge {
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 500;
            display: inline-block;
        }

        .badge-success {
            background: #d1fae5;
            color: var(--success);
        }

        .badge-warning {
            background: #fef3c7;
            color: var(--warning);
        }

        .badge-danger {
            background: #fee2e2;
            color: var(--danger);
        }

        .badge-info {
            background: #dbeafe;
            color: var(--info);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            text-align: left;
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        th {
            font-weight: 600;
            color: var(--gray);
            font-size: 0.875rem;
            text-transform: uppercase;
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--card-bg);
            color: var(--text);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
        }

        .modal-footer {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--gray);
        }

        .spinner {
            border: 3px solid var(--border);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--card-bg);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            z-index: 1001;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
            }

            to {
                transform: translateX(0);
            }
        }

        .service-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .service-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .status-running {
            background: var(--success);
        }

        .status-stopped {
            background: var(--danger);
        }

        .status-error {
            background: var(--warning);
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // API Client
        const API_BASE = 'http://localhost:8001';

        headers: {
            'Content-Type': 'application/json',
                        ...(token ? { 'Authorization': `Bearer ${token}` } : {}),
                        ...options.headers
        }
                });
        if (!response.ok) {
            if (response.status === 401) {
                localStorage.removeItem('admin_token');
                window.location.reload();
            }
            throw new Error(`API error: ${response.statusText}`);
        }
        return response.json();
            },

        // System APIs
        getSystemStats: () => api.request('/system/stats'),

            // Config APIs
            getConfigs: () => api.request('/config'),
                updateConfig: (key, value) => api.request(`/config/${key}?value=${encodeURIComponent(value)}`, { method: 'PUT' }),

                    // Alert APIs
                    getAlerts: () => api.request('/alerts'),
                        createAlert: (data) => api.request('/alerts', { method: 'POST', body: JSON.stringify(data) }),
                            updateAlert: (id, data) => api.request(`/alerts/${id}`, { method: 'PUT', body: JSON.stringify(data) }),
                                deleteAlert: (id) => api.request(`/alerts/${id}`, { method: 'DELETE' }),

                                    // Service APIs
                                    getServices: () => api.request('/services'),
                                        restartService: (name) => api.request(`/services/${name}/restart`, { method: 'POST' })
        };

        // Toast Notification Component
        function Toast({ message, type = 'info', onClose }) {
            useEffect(() => {
                const timer = setTimeout(onClose, 3000);
                return () => clearTimeout(timer);
            }, []);

            const icons = {
                success: 'check-circle',
                error: 'exclamation-circle',
                info: 'info-circle',
                warning: 'exclamation-triangle'
            };

            return (
                <div className="toast">
                    <i className={`fas fa-${icons[type]}`} style={{ color: `var(--${type})` }}></i>
                    <span>{message}</span>
                </div>
            );
        }

        // Login Component
        function LoginPage({ onLogin }) {
            const [username, setUsername] = useState('admin');
            const [password, setPassword] = useState('admin');
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            const handleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true);
                setError('');
                try {
                    await api.login(username, password);
                    onLogin();
                } catch (err) {
                    setError('Invalid credentials');
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', background: 'linear-gradient(135deg, var(--primary), var(--secondary))' }}>
                    <div style={{ background: 'white', padding: '3rem', borderRadius: '12px', boxShadow: '0 20px 60px rgba(0,0,0,0.3)', width: '400px' }}>
                        <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                            <div className="logo-icon" style={{ margin: '0 auto 1rem' }}>
                                <i className="fas fa-chart-line"></i>
                            </div>
                            <h1 style={{ fontSize: '1.75rem', color: 'var(--dark)' }}>Stockify Admin</h1>
                            <p style={{ color: 'var(--gray)' }}>Sign in to dashboard</p>
                        </div>
                        <form onSubmit={handleSubmit}>
                            <div className="input-group">
                                <label>Username</label>
                                <input
                                    type="text"
                                    value={username}
                                    onChange={(e) => setUsername(e.target.value)}
                                    required
                                />
                            </div>
                            <div className="input-group">
                                <label>Password</label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    required
                                />
                            </div>
                            {error && <div style={{ color: 'var(--danger)', marginBottom: '1rem', textAlign: 'center' }}>{error}</div>}
                            <button type="submit" className="btn btn-primary" style={{ width: '100%' }} disabled={loading}>
                                {loading ? 'Signing in...' : 'Sign In'}
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        // Dashboard Page
        function DashboardPage() {
            const [stats, setStats] = useState(null);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                loadStats();
                const interval = setInterval(loadStats, 5000);
                return () => clearInterval(interval);
            }, []);

            const loadStats = async () => {
                try {
                    const data = await api.getSystemStats();
                    setStats(data);
                } catch (err) {
                    console.error('Failed to load stats:', err);
                } finally {
                    setLoading(false);
                }
            };

            if (loading) {
                return <div className="loading"><div className="spinner"></div>Loading...</div>;
            }

            return (
                <>
                    <div className="header">
                        <h1>Dashboard</h1>
                    </div>
                    <div className="grid grid-4">
                        <div className="stat-card">
                            <div className="stat-label">CPU Usage</div>
                            <div className="stat-value" style={{ color: stats?.cpu_percent > 80 ? 'var(--danger)' : 'var(--primary)' }}>
                                {stats?.cpu_percent?.toFixed(1) || 0}%
                            </div>
                            <div className="stat-change" style={{ color: 'var(--success)' }}>
                                <i className="fas fa-arrow-down"></i> Normal
                            </div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">Memory Usage</div>
                            <div className="stat-value" style={{ color: stats?.memory_percent > 80 ? 'var(--danger)' : 'var(--info)' }}>
                                {stats?.memory_percent?.toFixed(1) || 0}%
                            </div>
                            <div className="stat-change" style={{ color: 'var(--success)' }}>
                                <i className="fas fa-arrow-down"></i> Optimal
                            </div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">Disk Usage</div>
                            <div className="stat-value" style={{ color: stats?.disk_percent > 80 ? 'var(--warning)' : 'var(--success)' }}>
                                {stats?.disk_percent?.toFixed(1) || 0}%
                            </div>
                            <div className="stat-change" style={{ color: 'var(--success)' }}>
                                <i className="fas fa-check"></i> Healthy
                            </div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">Cache Hit Rate</div>
                            <div className="stat-value" style={{ color: 'var(--secondary)' }}>
                                {stats?.cache_hit_rate?.toFixed(1) || 0}%
                            </div>
                            <div className="stat-change" style={{ color: 'var(--success)' }}>
                                <i className="fas fa-arrow-up"></i> Excellent
                            </div>
                        </div>
                    </div>
                </>
            );
        }

        // Config Page
        function ConfigPage() {
            const [configs, setConfigs] = useState([]);
            const [loading, setLoading] = useState(true);
            const [editingConfig, setEditingConfig] = useState(null);
            const [showToast, setShowToast] = useState(null);

            useEffect(() => {
                loadConfigs();
            }, []);

            const loadConfigs = async () => {
                try {
                    const data = await api.getConfigs();
                    setConfigs(data);
                } catch (err) {
                    setShowToast({ type: 'error', message: 'Failed to load configs' });
                } finally {
                    setLoading(false);
                }
            };

            const handleSave = async (key, value) => {
                try {
                    await api.updateConfig(key, value);
                    setShowToast({ type: 'success', message: 'Config updated successfully' });
                    setEditingConfig(null);
                    loadConfigs();
                } catch (err) {
                    setShowToast({ type: 'error', message: 'Failed to update config' });
                }
            };

            if (loading) {
                return <div className="loading"><div className="spinner"></div>Loading...</div>;
            }

            return (
                <>
                    <div className="header">
                        <h1>System Configuration</h1>
                        <div className="header-actions">
                            <span className="badge badge-info">{configs.length} Configurations</span>
                        </div>
                    </div>
                    <div className="card">
                        <table>
                            <thead>
                                <tr>
                                    <th>Key</th>
                                    <th>Value</th>
                                    <th>Category</th>
                                    <th>Requires Restart</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {configs.map(config => (
                                    <tr key={config.key}>
                                        <td><strong>{config.key}</strong><br /><small style={{ color: 'var(--gray)' }}>{config.description}</small></td>
                                        <td><code>{config.value}</code></td>
                                        <td><span className="badge badge-info">{config.category}</span></td>
                                        <td>{config.requires_restart ? <span className="badge badge-warning">Yes</span> : <span className="badge badge-success">No</span>}</td>
                                        <td>
                                            <button className="btn btn-secondary" style={{ padding: '0.5rem 1rem' }} onClick={() => setEditingConfig(config)}>
                                                <i className="fas fa-edit"></i> Edit
                                            </button>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>

                    {editingConfig && (
                        <ConfigEditModal
                            config={editingConfig}
                            onSave={handleSave}
                            onClose={() => setEditingConfig(null)}
                        />
                    )}

                    {showToast && (
                        <Toast
                            type={showToast.type}
                            message={showToast.message}
                            onClose={() => setShowToast(null)}
                        />
                    )}
                </>
            );
        }

        // Config Edit Modal
        function ConfigEditModal({ config, onSave, onClose }) {
            const [value, setValue] = useState(config.value);

            return (
                <div className="modal" onClick={onClose}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">Edit Configuration</div>
                        <div className="input-group">
                            <label>Key</label>
                            <input type="text" value={config.key} disabled />
                        </div>
                        <div className="input-group">
                            <label>Value</label>
                            <input
                                type="text"
                                value={value}
                                onChange={(e) => setValue(e.target.value)}
                            />
                        </div>
                        <div className="input-group">
                            <label>Description</label>
                            <textarea value={config.description} disabled rows="2"></textarea>
                        </div>
                        {config.requires_restart && (
                            <div style={{ background: '#fef3c7', padding: '1rem', borderRadius: '8px', marginBottom: '1rem' }}>
                                <strong><i className="fas fa-exclamation-triangle"></i> Warning:</strong> Changing this config requires service restart.
                            </div>
                        )}
                        <div className="modal-footer">
                            <button className="btn btn-secondary" onClick={onClose}>Cancel</button>
                            <button className="btn btn-primary" onClick={() => onSave(config.key, value)}>Save Changes</button>
                        </div>
                    </div>
                </div>
            );
        }

        // Services Page
        function ServicesPage() {
            const [services, setServices] = useState([]);
            const [loading, setLoading] = useState(true);
            const [showToast, setShowToast] = useState(null);

            useEffect(() => {
                loadServices();
                const interval = setInterval(loadServices, 5000);
                return () => clearInterval(interval);
            }, []);

            const loadServices = async () => {
                try {
                    const data = await api.getServices();
                    setServices(data);
                } catch (err) {
                    console.error('Failed to load services:', err);
                } finally {
                    setLoading(false);
                }
            };

            const handleRestart = async (name) => {
                try {
                    await api.restartService(name);
                    setShowToast({ type: 'success', message: `Service ${name} restarted` });
                    setTimeout(loadServices, 2000);
                } catch (err) {
                    setShowToast({ type: 'error', message: `Failed to restart ${name}` });
                }
            };

            if (loading) {
                return <div className="loading"><div className="spinner"></div>Loading...</div>;
            }

            return (
                <>
                    <div className="header">
                        <h1>Services</h1>
                        <div className="header-actions">
                            <span className="badge badge-success">{services.filter(s => s.status === 'running').length} Running</span>
                            <span className="badge badge-danger">{services.filter(s => s.status !== 'running').length} Stopped</span>
                        </div>
                    </div>
                    <div className="grid grid-2">
                        {services.map(service => (
                            <div key={service.name} className="service-card">
                                <div>
                                    <div className="service-status">
                                        <div className={`status-dot status-${service.status}`}></div>
                                        <strong>{service.name}</strong>
                                    </div>
                                    <div style={{ marginTop: '0.5rem', fontSize: '0.875rem', color: 'var(--gray)' }}>
                                        Status: <span style={{ textTransform: 'capitalize' }}>{service.status}</span>
                                    </div>
                                </div>
                                <div style={{ display: 'flex', gap: '0.5rem' }}>
                                    <button
                                        className="btn btn-primary"
                                        style={{ padding: '0.5rem 1rem' }}
                                        onClick={() => handleRestart(service.name)}
                                    >
                                        <i className="fas fa-sync-alt"></i> Restart
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>

                    {showToast && (
                        <Toast
                            type={showToast.type}
                            message={showToast.message}
                            onClose={() => setShowToast(null)}
                        />
                    )}
                </>
            );
        }

        // Alerts Page
        function AlertsPage() {
            const [alerts, setAlerts] = useState([]);
            const [loading, setLoading] = useState(true);
            const [showModal, setShowModal] = useState(false);
            const [showToast, setShowToast] = useState(null);

            useEffect(() => {
                loadAlerts();
            }, []);

            const loadAlerts = async () => {
                try {
                    const data = await api.getAlerts();
                    setAlerts(data);
                } catch (err) {
                    setShowToast({ type: 'error', message: 'Failed to load alerts' });
                } finally {
                    setLoading(false);
                }
            };

            const handleDelete = async (id) => {
                if (!confirm('Delete this alert rule?')) return;
                try {
                    await api.deleteAlert(id);
                    setShowToast({ type: 'success', message: 'Alert deleted' });
                    loadAlerts();
                } catch (err) {
                    setShowToast({ type: 'error', message: 'Failed to delete alert' });
                }
            };

            if (loading) {
                return <div className="loading"><div className="spinner"></div>Loading...</div>;
            }

            return (
                <>
                    <div className="header">
                        <h1>Alert Rules</h1>
                        <div className="header-actions">
                            <span className="badge badge-success">{alerts.filter(a => a.enabled).length} Active</span>
                            <button className="btn btn-primary" onClick={() => setShowModal(true)}>
                                <i className="fas fa-plus"></i> New Alert
                            </button>
                        </div>
                    </div>
                    <div className="card">
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Metric</th>
                                    <th>Condition</th>
                                    <th>Severity</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {alerts.map(alert => (
                                    <tr key={alert.id}>
                                        <td><strong>{alert.name}</strong></td>
                                        <td>{alert.metric}</td>
                                        <td>{alert.condition} {alert.threshold}</td>
                                        <td><span className={`badge badge-${alert.severity === 'critical' ? 'danger' : 'warning'}`}>{alert.severity}</span></td>
                                        <td>{alert.enabled ? <span className="badge badge-success">Enabled</span> : <span className="badge badge-secondary">Disabled</span>}</td>
                                        <td>
                                            <button className="btn btn-danger" style={{ padding: '0.5rem 1rem' }} onClick={() => handleDelete(alert.id)}>
                                                <i className="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>

                    {showToast && (
                        <Toast
                            type={showToast.type}
                            message={showToast.message}
                            onClose={() => setShowToast(null)}
                        />
                    )}
                </>
            );
        }

        // Main App
        function App() {
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [currentSection, setCurrentSection] = useState('dashboard');
            const [theme, setTheme] = useState('light');

            useEffect(() => {
                // Check if already logged in
                if (api.getToken()) {
                    setIsAuthenticated(true);
                }

                // Load theme
                const savedTheme = localStorage.getItem('theme') || 'light';
                setTheme(savedTheme);
                document.documentElement.setAttribute('data-theme', savedTheme);
            }, []);

            const toggleTheme = () => {
                const newTheme = theme === 'light' ? 'dark' : 'light';
                setTheme(newTheme);
                localStorage.setItem('theme', newTheme);
                document.documentElement.setAttribute('data-theme', newTheme);
            };

            const handleLogout = () => {
                localStorage.removeItem('admin_token');
                setIsAuthenticated(false);
            };

            if (!isAuthenticated) {
                return <LoginPage onLogin={() => setIsAuthenticated(true)} />;
            }

            const navItems = [
                { id: 'dashboard', label: 'Dashboard', icon: 'tachometer-alt' },
                { id: 'config', label: 'Configuration', icon: 'cog' },
                { id: 'services', label: 'Services', icon: 'server' },
                { id: 'alerts', label: 'Alerts', icon: 'bell' },
            ];

            return (
                <div className="dashboard">
                    <div className="sidebar">
                        <div className="logo">
                            <div className="logo-icon">
                                <i className="fas fa-chart-line"></i>
                            </div>
                            <span>Stockify</span>
                        </div>
                        {navItems.map(item => (
                            <div
                                key={item.id}
                                className={`nav-item ${currentSection === item.id ? 'active' : ''}`}
                                onClick={() => setCurrentSection(item.id)}
                            >
                                <i className={`fas fa-${item.icon}`}></i>
                                <span>{item.label}</span>
                            </div>
                        ))}
                        <div style={{ marginTop: 'auto', paddingTop: '2rem' }}>
                            <div className="nav-item" onClick={toggleTheme}>
                                <i className={`fas fa-${theme === 'light' ? 'moon' : 'sun'}`}></i>
                                <span>Theme</span>
                            </div>
                            <div className="nav-item" onClick={handleLogout}>
                                <i className="fas fa-sign-out-alt"></i>
                                <span>Logout</span>
                            </div>
                        </div>
                    </div>
                    <div className="main-content">
                        {currentSection === 'dashboard' && <DashboardPage />}
                        {currentSection === 'config' && <ConfigPage />}
                        {currentSection === 'services' && <ServicesPage />}
                        {currentSection === 'alerts' && <AlertsPage />}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>

</html>